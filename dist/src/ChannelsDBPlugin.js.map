{"version":3,"sources":["../../src/ChannelsDBPlugin.js"],"names":["Object","defineProperty","exports","value","polymer_element_js_1","require","ChannelsDBPlugin","arguments","shortResidueNames","ALA","ARG","ASN","ASP","CYS","GLN","GLU","HIS","ILE","LEU","LYS","MET","PHE","PRO","SER","THR","TRP","TYR","VAL","createSubtitle","channels","subtitle","Type","channelsToPlural","channel","backbone","residueLining","Layers","map","x","Residues","union","concat","apply","result","filter","Backbone","SideChain","liningResiduesString","lining","uniqueResidues","distinctBy","i","length","name","getShortResidueName","key","substring","r","channelsJson","request","XMLHttpRequest","open","pdbId","onload","req","readyState","status","JSON","parse","response","callback","console","error","statusText","channelsList","imgSrc","addChannelsReview","send","ul","document","querySelector","shadowRoot","forEach","index","li","createElement","mainDiv","numberDiv","innerHTML","appendChild","infoDiv","lengthSpan","setAttribute","bold","Length","delimiterSpan","hpSpan","Properties","Hydropathy","chargeSpan","Charge","nameSpan","Name","log","data","elements","v","k","push","html","item","type","String","reflectToAttribute","notify","PolymerElement","LayerWrapper","computedWidth","color","layer","window","customElements","define"],"mappings":"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","file":"ChannelsDBPlugin.js","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst polymer_element_js_1 = require(\"@polymer/polymer/polymer-element.js\");\r\nrequire(\"@polymer/polymer/lib/elements/dom-repeat.js\");\r\nrequire(\"bootstrap/dist/css/bootstrap.css\");\r\nclass ChannelsDBPlugin extends polymer_element_js_1.PolymerElement {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.shortResidueNames = {\r\n            ALA: \"A\",\r\n            ARG: \"R\",\r\n            ASN: \"N\",\r\n            ASP: \"D\",\r\n            CYS: \"C\",\r\n            GLN: \"Q\",\r\n            GLU: \"E\",\r\n            HIS: \"H\",\r\n            ILE: \"I\",\r\n            LEU: \"L\",\r\n            LYS: \"K\",\r\n            MET: \"M\",\r\n            PHE: \"F\",\r\n            PRO: \"P\",\r\n            SER: \"S\",\r\n            THR: \"T\",\r\n            TRP: \"W\",\r\n            TYR: \"Y\",\r\n            VAL: \"V\",\r\n        };\r\n        this.createSubtitle = function (channels) {\r\n            let subtitle = '';\r\n            switch (channels[0].Type) {\r\n                case 0:\r\n                    subtitle = \"Reviewed\";\r\n                    break;\r\n                case 1:\r\n                    subtitle = \"Transmembrane\";\r\n                    break;\r\n                case 2:\r\n                    subtitle = \"CSA\";\r\n                    break;\r\n                case 3:\r\n                    subtitle = \"Cof actor\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            return `${subtitle} ${this.channelsToPlural()}`;\r\n        };\r\n    }\r\n    calculateLining(channel, backbone) {\r\n        let residueLining = channel.Layers.map(((x) => { return x.Residues; }));\r\n        let union = [].concat.apply([], residueLining);\r\n        let result = [];\r\n        if (backbone)\r\n            result = union.filter(function (x) { return x.Backbone; });\r\n        else\r\n            result = union.filter(function (x) { return x.SideChain; });\r\n        return this.liningResiduesString(result);\r\n    }\r\n    ;\r\n    liningResiduesString(residueLining) {\r\n        let lining = {};\r\n        let result = \"\";\r\n        let uniqueResidues = ChannelsDBPlugin.distinctBy(residueLining, function (x) { return x['SequenceNumber'] + x['Chain']; });\r\n        for (let i = 0; i < uniqueResidues.length; i++) {\r\n            let name = uniqueResidues[i]['Name'];\r\n            let value = this.getShortResidueName(name);\r\n            if (typeof lining[this.getShortResidueName(name)] == 'undefined') {\r\n                lining[this.getShortResidueName(name)] = 1;\r\n            }\r\n            else {\r\n                lining[this.getShortResidueName(name)] = lining[this.getShortResidueName(name)] + 1;\r\n            }\r\n        }\r\n        for (let key in lining) {\r\n            let value = lining[key];\r\n            result = value === 1 ? result + key + '-' : result + value + key + '-';\r\n        }\r\n        return result.substring(0, result.length - 1);\r\n    }\r\n    ;\r\n    getShortResidueName(name) {\r\n        let r = this.shortResidueNames[name];\r\n        if (!r)\r\n            return name;\r\n        return r;\r\n    }\r\n    ;\r\n    static distinctBy(data, key) {\r\n        let elements = {};\r\n        let result = [];\r\n        for (let v of data) {\r\n            let k = key(v);\r\n            if (!elements[k]) {\r\n                result.push(v);\r\n                elements[k] = true;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    channelsToPlural() {\r\n        return `channel${this.channelsJson.length > 0 ? 's' : ''}`;\r\n    }\r\n    connectedCallback() {\r\n        const request = new XMLHttpRequest();\r\n        let channels = [];\r\n        request.open('GET', `https://webchem.ncbr.muni.cz/API/ChannelsDB/Component/${this.pdbId}`, true);\r\n        request.onload = function (req) {\r\n            if (request.readyState == 4) {\r\n                if (request.status == 200) {\r\n                    channels = JSON.parse(request.response);\r\n                    callback();\r\n                }\r\n                else {\r\n                    console.error(request.statusText);\r\n                }\r\n            }\r\n        };\r\n        let callback = (() => {\r\n            this.channelsJson = channels;\r\n            ChannelsDBPlugin.channelsList = channels;\r\n            this.subtitle = this.createSubtitle(this.channelsJson);\r\n            this.imgSrc = `https://webchem.ncbr.muni.cz/API/ChannelsDB/Download/${this.pdbId}?type=png`;\r\n            super.connectedCallback();\r\n            this.addChannelsReview();\r\n        });\r\n        request.send(null);\r\n    }\r\n    static get getChannelReview() {\r\n        return polymer_element_js_1.html `\n                        <!--<li ng-repeat=\"channel in channels\">-->\n                            <div>\n                                <div>#[[ $index + 1 ]]</div>\n                                <div>\n                                    <b>\n\t\t\t\t\t\t\t<span class=\"hint--bottom\" data-hint=\"Length of the channel [&#8491;].\">\n\t\t\t\t\t\t\t\tLength:\n\t\t\t\t\t\t\t</span>\n                                    </b>\n                                    \n                                    {{channel.Length | number: 1}}&#8491;\n\n                                    <span class=\"channels-db-delimiter\">|</span>\n\n                                    <b>\n\t\t\t\t\t\t\t<span class=\"hint--bottom hint--large\" data-hint=\"Channel's hydropathy is an average hydropathy index assigned to the lining residues according to the Kyte and Doolitle.\">\n\t\t\t\t\t\t\t\tHPthy:\n\t\t\t\t\t\t\t</span>\n                                    </b>\n                                    {{channel.Properties.Hydropathy | number: 2}}\n\n                                    <span class=\"channels-db-delimiter\">|</span>\n                                    <b>\n\t\t\t\t\t\t\t<span class=\"hint--bottom hint--large\" data-hint=\"Charge is calculated as a sum of charged residues (Arg, Lys = +1; Asp, Glu = -1)\">\n\t\t\t\t\t\t\t\tCharge:\n\t\t\t\t\t\t\t</span>\n                                    </b>\n                                    {{channel.Properties.Charge > 0? '+': ''}}{{channel.Properties.Charge}}\n                                    <span style=\"float: right; font-weight: 200;\">{{channel.Name}}</span>\n                                </div>\n\n                            </div>\n\n                            <div class=\"channels-db-channel-body\">\n                                <!--<div style=\"background: #{{channel.Color}}\"></div>-->\n\n                                <div class=\"channels-db-channel-body-content\">\n                                    <div style=\"position: relative\">\n                                        <b>Bottleneck:</b>\n\n                                        <span class=\"hint--bottom\" data-hint=\"Channels's lowest profile: radius / length\">\n\t\t\t\t\t\t\t\t{{bottlenecks[$index].MinRadius | number: 1}} / {{(bottlenecks[$index].EndDistance - bottlenecks[$index].StartDistance) | number: 1}}\n\t\t\t\t\t\t\t</span>\n                                        <span class=\"channels-db-delimiter\">|</span>\n                                        <span class=\"hint--bottom\" data-hint=\"Hydropathy of the bottleneck.\">\n\t\t\t\t\t\t\t\t{{bottlenecks[$index].Properties.Hydropathy | number: 2}}\n\t\t\t\t\t\t\t</span>\n                                        <span class=\"channels-db-delimiter\">|</span>\n                                        <span class=\"hint--bottom\" data-hint=\"Formal charge of the bottleneck.\">\n\t\t\t\t\t\t\t\t{{channel.Properties.Charge > 0? '+': ''}}{{bottlenecks[$index].Properties.Charge}}\n\t\t\t\t\t\t\t</span>\n                                        <span class=\"channels-db-delimiter\">|</span>\n                                        <span class=\"hint--bottom\" data-hint=\"Bottleneck lining residues.\">\n\t\t\t\t\t\t\t\t{{liningResiduesString(bottlenecks[$index].Residues) | cut:true:10:' ...' }}\n\t\t\t\t\t\t\t</span>\n                                    </div>\n\n\n                                    <div>\n                                        <b>Lining:</b>\n                                        <span class=\"hint--top\" data-hint=\"Sidechain lining residues\">\n\t\t\t\t\t\t\t\t{{calculateLining(channel, false) | cut:true:200:'...' }}\n\t\t\t\t\t\t\t</span>\n                                        <!--<span ng-show=\"{{calculateLining(channel, true).length > 0}}\" class=\"channels-db-delimiter\">|</span>-->\n                                        <span class=\"hint--top\" data-hint=\"Backbone lining residues\">\n\t\t\t\t\t\t\t\t{{calculateLining(channel, true) | cut:true:200:'...' }}\n\t\t\t\t\t\t\t</span>\n\n\n\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class=\"channels-db-channel-layers-wrapper\">\n\n                                <div class=\"hint--right hint--large\" data-hint=\"The channel is uniformly divided into layers, and each layer is defined by the residues lining it. A new layer starts whenever there is a change in the list of residues lining the channel along its length.\">\n                                    Layers\n                                </div>\n\n                                <div class=\"channels-db-channel-layers\">\n                                    <!--<div ng-repeat=\"layer in channel.wrappedLayers\"-->\n                                         style=\"width: {{ layer.computedWidth }}%; background-color:{{ layer.color }};\n\t\t\t\t\t\t\t\t\t border-bottom: {{layer.layer.LocalMinima ? '3px' : '0'}} solid {{layer.layer.Bottleneck ? 'black' : '\t#666666'}}\">\n\n                                        <div class=\"channels-db-channel-layer-info\">\n                                            <div style=\"left: 0;\" class=\"channels-db-channel-layer-info-unit\">\n                                                <div><small><b>Radius:</b> {{layer.layer.MinRadius | number: 1}}&#8491;</small></div>\n                                                <div><small><b>Length:</b> {{layer.layer.EndDistance - layer.layer.StartDistance | number: 1}}&#8491;</small></div>\n                                            </div>\n                                            <div style=\"left: 96px;\" class=\"channels-db-channel-layer-info-unit\">\n                                                <div><small><b>Hpthy:</b> {{layer.layer.Properties.Hydropathy | number: 2}}</small></div>\n                                                <div><small><b>Charge:</b> {{layer.layer.Properties.Charge > 0? '+': ''}}{{layer.layer.Properties.Charge}}</small></div>\n                                            </div>\n                                            <div class=\"channels-db-channel-layer-info-residues\">\n\t\t\t\t\t\t\t\t\t<!--<span ng-repeat=\"residue in layer.layer.Residues\">-->\n\t\t\t\t\t\t\t\t\t\t<!--\n\t\t\t\t\t\t\t\t\t\t-->\n\t\t\t\t\t\t\t\t\t\t<!--<small ng-if=\"residue.Backbone\">-->\n\t\t\t\t\t\t\t\t\t\t\t<!--\n\t\t\t\t\t\t\t\t\t\t\t-->\n\t\t\t\t\t\t\t\t\t\t\t<b>\n\t\t\t\t\t\t\t\t\t\t\t\t<!--\n\t\t\t\t\t\t\t\t\t\t\t\t-->\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"hint--top\" data-hint=\"Backbone\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!--\n\t\t\t\t\t\t\t\t\t\t\t\t\t-->\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{residue.Name}} {{residue.SequenceNumber}}{{residue.Chain}}{{$last? '' : ' &ndash; '}}\n                                                    <!--\n                                                    -->\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n                                                <!--\n                                                -->\n\t\t\t\t\t\t\t\t\t\t\t</b>\n                                            <!--\n                                            -->\n\t\t\t\t\t\t\t\t\t\t</small>\n                                        <!--\n                                        -->\n\t\t\t\t\t\t\t\t\t\t<!--<small ng-if=\"!residue.Backbone\">{{residue.Name}} {{residue.SequenceNumber}}{{residue.Chain}}{{$last? '' : ' &ndash; '}}</small>-->\n                                        <!--\n                                        -->\n\t\t\t\t\t\t\t\t\t</span>\n                                                <!--<div ng-show=\"{{layer.layer.Bottleneck}}\" class=\"channels-db-channel-layer-info-bottleneck\">Bottleneck</div>-->\n                                                <!--<div ng-show=\"{{layer.layer.LocalMinima && !layer.layer.Bottleneck}}\" class=\"channels-db-channel-layer-info-bottleneck\">Local minimum</div>-->\n                                            </div>\n                                            <div style=\"background: {{ layer.color }}\"></div>\n                                        </div>\n\n                                    </div>\n                                </div>\n                            </div>\n                        </li>`;\r\n    }\r\n    static get properties() {\r\n        return {\r\n            pdbId: {\r\n                type: String,\r\n                reflectToAttribute: true,\r\n                notify: true,\r\n            }\r\n        };\r\n    }\r\n    static charge() {\r\n        console.log('nana');\r\n        return polymer_element_js_1.html ``;\r\n    }\r\n    static computeFilter(item) {\r\n        console.log(item);\r\n    }\r\n    static get template() {\r\n        // language=HTML\r\n        return polymer_element_js_1.html `\n            <style>\n                @import url( ../public/style.css )\n            </style>\n            <div class=\"channels-db-header\">\n            <span>\n                <span class=\"channels-db-id\">[[pdbId]] | <small>[[channelsJson.length]] [[subtitle]]</small> &nbsp;&nbsp;&mdash;&nbsp;&nbsp;</span>ChannelsDB\n                <span style=\"float:right;\"><a href=\"https://webchemdev.ncbr.muni.cz/ChannelsDB/detail/[[pdbId]]\">[+ More]</a></span>\n            </span>\n            </div>\n            <div class=\"channels-db-body\">\n                <div class=\"channels-db-left-pane\">\n                    <div class=\"channels-db-thumb channels-db-thumb-src\">\n                        <img src=\"{{imgSrc}}\">\n                    </div>\n                </div>\n\n                <div class=\"channels-db-right-pane\">\n                    <!--<div ng-show=\"isError\" class=\"channels-db-right-pane-error\">Error: {{error}}</div>-->\n\n                    <ul class=\"channels-db-list\">\n                        \n                    </ul>\n                </div>\n\n            </div>\n\n            <div class=\"channels-db-footer\">\n                <span class=\"channels-db-powered\">powered by <a target=\"_blank\" href=\"http://mole.chemi.muni.cz\">MOLE 2.5</a></span>\n                <!--<a target=\"_blank\" href=\"{{link}}\">[+ Custom analysis]</a>-->\n            </div>\n        `;\r\n    }\r\n    addChannelsReview() {\r\n        let ul = document.querySelector('channelsdb-plugin').shadowRoot.querySelector('.channels-db-list');\r\n        this.channelsJson.forEach((channel, index) => {\r\n            const li = document.createElement('li');\r\n            const mainDiv = document.createElement('div');\r\n            const numberDiv = document.createElement('div');\r\n            numberDiv.innerHTML += `#${index + 1}`;\r\n            mainDiv.appendChild(numberDiv);\r\n            const infoDiv = document.createElement('div');\r\n            const lengthSpan = document.createElement('span');\r\n            lengthSpan.setAttribute('class', 'hint--bottom');\r\n            lengthSpan.setAttribute('data-hint', 'Length of the channel [&#8491;].');\r\n            lengthSpan.innerHTML += \"Length: \";\r\n            let bold = document.createElement('b');\r\n            bold.appendChild(lengthSpan);\r\n            infoDiv.appendChild(bold);\r\n            infoDiv.innerHTML += `${channel.Length || 1}&#8491`;\r\n            const delimiterSpan = document.createElement('span');\r\n            delimiterSpan.setAttribute('class', 'channels-db-delimiter');\r\n            delimiterSpan.innerHTML += '|';\r\n            infoDiv.appendChild(delimiterSpan);\r\n            const hpSpan = document.createElement('span');\r\n            hpSpan.setAttribute('class', 'hint--bottom hint--large');\r\n            hpSpan.setAttribute('data-hint', 'Channel\\'s hydropathy is an average hydropathy index assigned to the lining residues according to the Kyte and Doolitle.');\r\n            hpSpan.innerHTML += \"HPthy: \";\r\n            bold = document.createElement('b');\r\n            bold.appendChild(hpSpan);\r\n            infoDiv.appendChild(bold);\r\n            infoDiv.innerHTML += `${channel.Properties.Hydropathy || 2}`;\r\n            infoDiv.appendChild(delimiterSpan);\r\n            const chargeSpan = document.createElement('span');\r\n            chargeSpan.setAttribute('class', 'hint--bottom hint--large');\r\n            chargeSpan.setAttribute('data-hint', 'Charge is calculated as a sum of charged residues (Arg, Lys = +1; Asp, Glu = -1)');\r\n            chargeSpan.innerHTML += \"Charge: \";\r\n            bold = document.createElement('b');\r\n            bold.appendChild(chargeSpan);\r\n            infoDiv.appendChild(bold);\r\n            infoDiv.innerHTML += `${channel.Properties.Charge > 0 ? '+' : ''}${channel.Properties.Charge}`;\r\n            const nameSpan = document.createElement('span');\r\n            nameSpan.setAttribute('style', \"float: right; font-weight: 200;\");\r\n            nameSpan.innerHTML += `${channel.Name}`;\r\n            infoDiv.appendChild(nameSpan);\r\n            mainDiv.appendChild(infoDiv);\r\n            li.appendChild(mainDiv);\r\n            ul.appendChild(li);\r\n        });\r\n        // ul.appendChild(document.createElement('li'));\r\n        console.log();\r\n    }\r\n}\r\nclass LayerWrapper {\r\n    constructor(computedWidth, color, layer) {\r\n        this.computedWidth = computedWidth;\r\n        this.color = color;\r\n        this.layer = layer;\r\n    }\r\n}\r\nexports.LayerWrapper = LayerWrapper;\r\nwindow.customElements.define('channelsdb-plugin', ChannelsDBPlugin);\r\n"]}